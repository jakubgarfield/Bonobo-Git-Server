@using AndreyKurdiumov.AspNetCore.Helpers
@using Bonobo.Git.Server.App_GlobalResources
@using Bonobo.Git.Server.Models
@using Microsoft.AspNetCore.Http
@model Bonobo.Git.Server.Models.RepositoryCommitsModel
@inject IHttpContextAccessor HttpContextAccessor
@{
    Layout = "~/Views/Repository/_RepositoryLayout.cshtml";
    ViewBag.Title = Resources.Repository_Commits_Title;
}
@if (Model != null)
{
    <div class="repositoryContent">
        @Html.Partial("_BranchSwitcher")
        @if (Model.Commits != null)
        {
            var grid = new WebGrid(HttpContextAccessor, rowsPerPage: 10, canPage:true, canSort:false);
            grid.Bind(Model.Commits, null, false, (int)(ViewBag.TotalCount ?? 0));
            @grid.GetHtml(displayHeader: false, mode: WebGridPagerModes.All, 
                columns: grid.Columns(
                    grid.Column(format: item => Html.Partial("_Commit", (RepositoryCommitModel)item.Value))
                    )
                )
        }
    </div>
}
